<!DOCTYPE html>
<html>
<head>
	<title>ToDo</title>
	<script src = "https://code.jquery.com/jquery-2.1.3.min.js"
	type = "text/javascript"></script>
	<script src = "https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"
	type = "text/javascript"></script>
	<script src = "https://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min.js"
	type = "text/javascript"></script>
	<link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body>
	<header>
	<div>TO DO</div>
	</header>
	<div id="toDoContainer">
		<input type="text" name="" placeholder="What's On Your Mind" id="toDoInput">
	</div>
	<script type="text/template" id="template">
		<div class="todo-model" id="toDoModel">
			<div ><%- text %></div>
			<input type="checkbox" name="completed" id="check">
		</div>
	</script>
	<script type="text/javascript">
		    'use strict';


	var item= Backbone.Model.extend({
		defaults:{
			text: "",
			completed:false
		}
	});
	
	var list=Backbone.Collection.extend({
		model:item,
		

	});
	
	var listItem= new list();
	
	var modelView=Backbone.View.extend({
		//el:"#toDoModel",
		tagName:"div",
		model:{},
		template:_.template($("#template").html()),
		render:function(){
			
		
			this.$el.html(this.template(this.model.toJSON()));
			return this;
		}
	});
	var todoView=Backbone.View.extend({
		el:"#toDoContainer",
		ob:{},
		template:_.template(this.$("#template").html()),
		events:{
			"keypress #toDoInput" : "createTodo"
		},
		initialize:function(){
			listItem.on("add",this.addOne,this);
			
			
		},
		createTodo:function(e){
			
			if( e.which!=13 || ! $("#toDoInput").val().trim() ){
				return;
			}
		 	var a=this.createAttributes();
			listItem.add(a);
			$("#toDoInput").val("");
		},
		
		createAttributes:function(){
			return{
				text:$("#toDoInput").val().trim(),
				completed:false
			}
		},
		addOne:function(it){
		var view= new modelView({model:it});
		
		$("#toDoContainer").append(view.render().el)
		
		}
	});
	var todoview = new todoView();
	</script>
</body>
</html>